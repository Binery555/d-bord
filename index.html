<!DOCTYPE html>
<html lang="si">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Reviews</title>
<style>
  :root{
    --bg:#0b0f14; --panel:#101826; --ink:#e6eef7; --muted:#9db1c8;
    --line:#1a2736; --accent:#22d3ee; --accent2:#22c55e; --warn:#f59e0b; --bad:#ef4444;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; color:var(--ink); background:
      radial-gradient(80rem 40rem at -10% -10%, #0e1a2a 0%, transparent 60%),
      radial-gradient(60rem 30rem at 110% 120%, #082032 0%, transparent 60%),
      var(--bg);
    font-family: Inter, system-ui, Segoe UI, Roboto, Arial, sans-serif;
  }
  header{
    position:sticky; top:0; z-index:10;
    backdrop-filter: blur(8px);
    background: color-mix(in srgb, #0a1220 70%, transparent);
    border-bottom:1px solid var(--line);
  }
  .wrap{max-width:1100px;margin:0 auto;padding:18px 16px}
  h1{font-size:1.6rem;margin:0;display:flex;gap:.6rem;align-items:center}
  .grid{display:grid; gap:16px}
  @media(min-width:960px){ .grid-2{grid-template-columns:1.1fr 2fr} }

  /* Panels */
  .card{background:linear-gradient(180deg,#0d1626,#0b1320); border:1px solid var(--line);
    border-radius:16px; padding:14px}
  .card h2{font-size:1.1rem;margin:.1rem 0 10px}
  label{display:block;font-size:.9rem;color:var(--muted);margin:.2rem 0}
  input[type="text"], select, textarea{
    width:100%; background:#0c1422; color:var(--ink);
    border:1px solid #152235; border-radius:12px; padding:10px 12px; outline:none;
  }
  textarea{min-height:96px; resize:vertical}
  .row{display:flex; gap:10px; flex-wrap:wrap}
  .btn{
    appearance:none; border:1px solid #17324a; background:#0e1b2c; color:var(--ink);
    padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:600;
  }
  .btn.primary{border-color:#115e6a; background:linear-gradient(90deg,#0b3d4a,#0e5a6a)}
  .btn:disabled{opacity:.6; cursor:not-allowed}

  /* Stars */
  .stars{display:inline-flex; gap:4px; align-items:center}
  .star{
    width:22px;height:22px; mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill="black" d="M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>') center/contain no-repeat;
    background:#203347; cursor:pointer; display:inline-block;
  }
  .star.on{ background:linear-gradient(180deg, #ffd54a, #f59e0b)}

  /* List + item */
  .toolbar{display:flex; gap:10px; flex-wrap:wrap; align-items:center; justify-content:space-between; margin-bottom:10px}
  .filters{display:flex; gap:10px; flex-wrap:wrap}
  .rev{padding:12px 10px; border-bottom:1px dashed #183048}
  .rev:last-child{border-bottom:none}
  .rev header{display:flex; align-items:center; gap:8px; justify-content:space-between}
  .name{font-weight:700}
  .lang{font-size:.8rem; color:#8dd9ff; background:#0b2236; border:1px solid #12324e; padding:.15rem .45rem; border-radius:999px}
  .rating{display:flex; gap:2px}
  .rt{width:14px;height:14px; background:#354b63; mask:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16"><path fill="black" d="M8 12.3l3.7 2.2-1-4.2L14 7l-4.3-.4L8 2 6.3 6.6 2 7l3.3 3.3-1 4.2z"/></svg>') center/contain no-repeat}
  .rt.on{background:linear-gradient(180deg,#ffd54a,#f59e0b)}
  .date{color:var(--muted); font-size:.8rem}
  .text{margin-top:6px; line-height:1.5}
  .rtl{direction:rtl} /* Arabic */

  .pager{display:flex; gap:6px; flex-wrap:wrap; justify-content:center; padding:10px 0}
  .pagebtn{
    border:1px solid #183048; background:#0a1626; color:var(--ink);
    padding:6px 10px; border-radius:10px; cursor:pointer; font-size:.9rem;
  }
  .pagebtn.active{background:#102b3f; border-color:#1f6ab0}
  .empty{color:var(--muted); text-align:center; padding:16px}
</style>
</head>
<body>

<header>
  <div class="wrap">
    <h1>Reviews</h1>
  </div>
</header>

<main class="wrap grid grid-2" style="margin-top:12px">
  <!-- LEFT: Add Review -->
  <section class="card">
    <h2>‚ûï Add a Review</h2>
    <div class="row">
      <div style="flex:1 1 180px">
        <label>Name</label>
        <input id="name" type="text" placeholder="Your name"/>
      </div>
      <div style="flex:1 1 180px">
        <label>Language</label>
        <select id="lang">
          <option value="en">English</option>
          <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ© (Arabic)</option>
          <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä (Hindi)</option>
          <option value="zh">‰∏≠Êñá (Chinese)</option>
          <option value="ja">Êó•Êú¨Ë™û (Japanese)</option>
          <option value="es">Espa√±ol (Spanish)</option>
          <option value="ru">–†—É—Å—Å–∫–∏–π (Russian)</option>
        </select>
      </div>
    </div>
    <div style="margin-top:8px">
      <label>Rating</label>
      <div id="starPicker" class="stars" aria-label="Pick rating" title="Pick rating"></div>
    </div>
    <div style="margin-top:8px">
      <label>Review</label>
      <textarea id="text" placeholder="Write your review in English..."></textarea>
    </div>
    <div class="row" style="margin-top:10px">
      <button id="addBtn" class="btn primary">Save Review</button>
    </div>
  </section>

  <!-- RIGHT: List & Filters -->
  <section class="card">
    <h2>üóÇÔ∏è Reviews</h2>
    <div class="toolbar">
      <div class="filters">
        <select id="fLang" title="Filter by language">
          <option value="all">All languages</option>
          <option value="en">English</option>
          <option value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</option>
          <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
          <option value="zh">‰∏≠Êñá</option>
          <option value="ja">Êó•Êú¨Ë™û</option>
          <option value="es">Espa√±ol</option>
          <option value="ru">–†—É—Å—Å–∫–∏–π</option>
        </select>
        <select id="fRating" title="Minimum rating">
          <option value="0">Min ‚òÖ0</option>
          <option value="3">Min ‚òÖ3</option>
          <option value="4" selected>Min ‚òÖ4</option>
          <option value="5">‚òÖ5 only</option>
        </select>
        <select id="fSort" title="Sort">
          <option value="new">Newest</option>
          <option value="top">Top rated</option>
        </select>
        <input id="fQuery" type="text" placeholder="Search text..."/>
        <select id="fPageSize" title="Per page">
          <option>10</option>
          <option selected>25</option>
          <option>50</option>
          <option>100</option>
        </select>
      </div>
      <!-- Removed export/import buttons block -->
    </div>

    <!-- Removed the stats line -->
    <div id="list"></div>
    <div id="pager" class="pager"></div>
  </section>
</main>

<!-- Removed the footer with Auto-save / languages / re-generate link -->

<script>
(function(){
  // ---------- Storage helpers ----------
  const KEY = 'global_reviews_v1';
  const SEED_FLAG = 'global_reviews_seeded_v2_2800';
  const SCHED_KEY = 'global_reviews_daily_schedule_v1';
  const read = () => JSON.parse(localStorage.getItem(KEY) || '[]');
  const write = (arr) => localStorage.setItem(KEY, JSON.stringify(arr));
  const seeded = () => localStorage.getItem(SEED_FLAG) === '1';
  const setSeeded = (v) => localStorage.setItem(SEED_FLAG, v ? '1' : '0');

  // ---------- Star picker ----------
  let currentRating = 5;
  const starPicker = document.getElementById('starPicker');
  function renderStarPicker(){
    starPicker.innerHTML = '';
    for(let i=1;i<=5;i++){
      const s = document.createElement('span');
      s.className = 'star' + (i <= currentRating ? ' on':'');
      s.title = i + ' star';
      s.addEventListener('click', ()=>{ currentRating = i; renderStarPicker(); });
      starPicker.appendChild(s);
    }
  }
  renderStarPicker();

  // ---------- Phrase bank (ENGLISH ONLY TEXTS) ----------
  const EN_TEXTS = [
    "OnexGain made Binance trading straightforward and confident for me.",
    "The Binance A‚ÄìZ full course inside OnexGain is clear and practical.",
    "I like the AI bot that suggests automatic winning entries with risk control.",
    "Technical strategy modules are concise and actually usable on live charts.",
    "Signals are transparent with entry, SL, and targets‚Äîeasy to follow.",
    "Great toolset: course + strategy + signals in one clean dashboard.",
    "Backtesting ideas inside the lessons improved my discipline a lot.",
    "AI suggestions arrive right at key levels‚Äîtimely and helpful.",
    "Good risk-to-reward focus, not just random alerts.",
    "Clean UI, fast loading, and accurate levels for entries.",
    "OnexGain‚Äôs winning strategy templates are practical for Futures.",
    "The course explains leverage, margin, and liquidation simply.",
    "AI bot doesn‚Äôt overtrade; it waits for quality confirmations.",
    "Clear stop-loss placement rules‚Äîno guesswork anymore.",
    "Helpful for both beginners and active Binance traders.",
    "I use the signals as a second opinion‚Äîgreat confluence.",
    "Quality over quantity; alerts are filtered and focused.",
    "The modules on trend, structure, and momentum are gold.",
    "I learned to size positions correctly‚Äîhuge difference.",
    "The AI entry finder pairs nicely with TA checklists.",
    "Winning technical strategy + risk plan kept me consistent.",
    "Targets respect volatility; TP1/TP2 tracking feels smart.",
    "Easy to switch pairs and keep context across timeframes.",
    "Simple language, strong examples, and updated playbooks.",
    "OnexGain helped me stop chasing and start planning.",
    "I finally understand how to combine signals with the course.",
    "Great walkthroughs on SL placement below structure.",
    "The AI bot highlights liquidity sweeps nicely.",
    "Alert quality is steady, not noisy.",
    "Practical, realistic, and trader-friendly."
  ];

  // ---------- Localized name banks (names only; TEXTS stay English) ----------
  const PH = {
    en: { names: ['Alex','Jordan','Taylor','Sam','Chris','Morgan','Jamie','Riley','Casey','Avery','Drew','Rowan','Cameron'], texts: EN_TEXTS },
    ar: { names: ['ÿπŸÑŸä','ÿ≥ÿßÿ±ÿ©','ÿ£ÿ≠ŸÖÿØ','ŸÑŸäŸÜÿß','ŸäŸàÿ≥ŸÅ','ŸÖÿ±ŸäŸÖ','ŸÉÿ±ŸäŸÖ','ŸÜŸàÿ±','ÿÆÿßŸÑÿØ','‡§πŸÜÿØ'.replace('‡§π','Ÿá')], texts: EN_TEXTS },
    hi: { names: ['‡§Ü‡§∞‡•ç‡§Ø‡§®','‡§∞‡§ø‡§Ø‡§æ','‡§Ü‡§¶‡§ø‡§§‡•ç‡§Ø','‡§®‡•á‡§π‡§æ','‡§µ‡§ø‡§µ‡§æ‡§®','‡§Ö‡§®‡•Å‡§∑‡•ç‡§ï‡§æ','‡§ï‡•É‡§∑','‡§Ü‡§Ø‡§∂‡§æ','‡§∏‡§ø‡§Ø‡§æ','‡§∞‡•ã‡§π‡§®'], texts: EN_TEXTS },
    zh: { names: ['Â∞èÊòé','Â∞è‰∏Ω','Áéã‰ºü','ÊùéÂ®ú','ÈôàÂàö','ÂàòÁíê','Âº†Êô®','ËµµÈùô','Â≠ôÊù∞','Âë®Â©∑'], texts: EN_TEXTS },
    ja: { names: ['„ÇÜ„ÅÜ„Åü','„Åï„Åè„Çâ','„ÅØ„Çã„Åç','„Åø„Åï„Åç','„Åù„ÅÜ„Åü','„Çä„Çì','„ÅØ„Çã„Åã','„Å†„ÅÑ„Åç','„ÇÜ„ÅÑ','„ÅÇ„Åä„ÅÑ'], texts: EN_TEXTS },
    es: { names: ['Juan','Mar√≠a','Carlos','Luc√≠a','Diego','Sof√≠a','Pedro','Ana','Luis','Elena'], texts: EN_TEXTS },
    ru: { names: ['–ê–ª–µ–∫—Å–µ–π','–ê–Ω–Ω–∞','–ò–≤–∞–Ω','–ú–∞—Ä–∏—è','–î–º–∏—Ç—Ä–∏–π','–û–ª—å–≥–∞','–°–µ—Ä–≥–µ–π','–ï–ª–µ–Ω–∞','–ö–∏—Ä–∏–ª–ª','–ù–∞—Ç–∞–ª—å—è'], texts: EN_TEXTS },
  };
  const LANGS = ['en','ar','hi','zh','ja','es','ru'];

  function randomFrom(arr){ return arr[Math.floor(Math.random()*arr.length)] }
  function randBetween(a,b){ return Math.floor(Math.random()*(b-a+1))+a }

  function makeOne(lang, seedTag=true, manual=false){
    const now = Date.now() - randBetween(0, 1000*60*60*24*120); // last 120 days
    const rating = [5,5,4,4,5,3][Math.floor(Math.random()*6)]; // bias high
    const name = randomFrom(PH[lang].names);
    const text = randomFrom(PH[lang].texts); // **ENGLISH ONLY**
    return {
      id: crypto.randomUUID(),
      lang, name,
      rating,
      text,
      date: now,
      seed: !!seedTag,
      manual: !!manual
    };
  }

  // ---------- Remove a specific unwanted review on boot ----------
  function purgePremiumAnalyzer(list){
    const lower = s => (s||'').toString().toLowerCase();
    return list.filter(r=>{
      const badName = lower(r.name) === 'premium analyzer';
      const hasGood = lower(r.text).includes('good.');
      return !(badName && hasGood);
    });
  }

  // ---------- Seeding (~2800) ----------
  function seedIfEmpty(){
    if (seeded()) return;
    let data = read();
    if (data.length > 0) {
      data = purgePremiumAnalyzer(data);
      write(data);
      setSeeded(true);
      return;
    }
    const target = 2800; // ~2800 total
    const perLang = Math.floor(target / LANGS.length);
    for(const lg of LANGS){
      for(let i=0;i<perLang;i++){
        data.push(makeOne(lg, true, false));
      }
    }
    while(data.length < target) data.push(makeOne('en', true, false));
    data = purgePremiumAnalyzer(data);
    write(data);
    setSeeded(true);
  }

  // ---------- Daily auto-add scheduler (15‚Äì30/day) ----------
  function todayKey(){
    const d = new Date();
    return d.getFullYear()+'-'+String(d.getMonth()+1).padStart(2,'0')+'-'+String(d.getDate()).padStart(2,'0');
  }
  function loadSchedule(){
    const raw = JSON.parse(localStorage.getItem(SCHED_KEY) || 'null');
    return raw && raw.day === todayKey() ? raw : null;
  }
  function saveSchedule(obj){
    localStorage.setItem(SCHED_KEY, JSON.stringify(obj));
  }
  function generateDailySchedule(){
    const count = randBetween(15,30);
    const times = [];
    for(let i=0;i<count;i++){
      const h = randBetween(0,23);
      const m = randBetween(0,59);
      const s = randBetween(0,59);
      const d = new Date();
      d.setHours(h, m, s, 0);
      times.push({ at: d.getTime(), done: false });
    }
    times.sort((a,b)=>a.at-b.at);
    const sched = { day: todayKey(), times };
    saveSchedule(sched);
    return sched;
  }
  function ensureSchedule(){
    let sched = loadSchedule();
    if(!sched) sched = generateDailySchedule();
    return sched;
  }
  function runSchedulerTick(){
    const sched = ensureSchedule();
    let changed = false;
    const now = Date.now();
    const data = read();
    for(const slot of sched.times){
      if(!slot.done && now >= slot.at){
        const lang = randomFrom(LANGS);
        const rev = {
          id: crypto.randomUUID(),
          lang,
          name: randomFrom(PH[lang].names),
          rating: [5,5,4,4,5][Math.floor(Math.random()*5)],
          text: randomFrom(EN_TEXTS),
          date: now,
          seed: false,
          manual: false
        };
        data.unshift(rev);
        slot.done = true;
        changed = true;
      }
    }
    if(changed){
      write(data);
      saveSchedule(sched);
      render();
    }
    if(sched.day !== todayKey()){
      saveSchedule(generateDailySchedule());
    }
  }

  // ---------- Render / Filters / Paging ----------
  const listEl = document.getElementById('list');
  const pagerEl = document.getElementById('pager');
  const fLang = document.getElementById('fLang');
  const fRating = document.getElementById('fRating');
  const fSort = document.getElementById('fSort');
  const fQuery = document.getElementById('fQuery');
  const fPageSize = document.getElementById('fPageSize');

  let page = 1;

  function fmtDate(ts){
    const d = new Date(ts);
    return d.toLocaleDateString(undefined,{year:'numeric',month:'short',day:'numeric'});
  }

  function applyFilters(data){
    const lang = fLang.value;
    const minR = parseInt(fRating.value,10) || 0;
    const q = fQuery.value.trim().toLowerCase();
    let out = data.filter(r => (lang==='all' || r.lang===lang) && r.rating>=minR);
    if(q){
      out = out.filter(r => (r.name||'').toLowerCase().includes(q) || (r.text||'').toLowerCase().includes(q));
    }
    const sort = fSort.value;
    if(sort==='new'){ out.sort((a,b)=>b.date-a.date); }
    else if(sort==='top'){ out.sort((a,b)=> b.rating - a.rating || b.date - a.date ); }
    return out;
  }

  function render(){
    const data = read();
    const filtered = applyFilters(data);
    const total = filtered.length;
    const pageSize = parseInt(fPageSize.value,10)||25;
    const lastPage = Math.max(1, Math.ceil(total / pageSize));
    if(page>lastPage) page = lastPage;
    const start = (page-1)*pageSize;
    const slice = filtered.slice(start, start+pageSize);

    // list
    listEl.innerHTML = '';
    if(slice.length===0){
      listEl.innerHTML = `<div class="empty">No reviews match your filters.</div>`;
    }else{
      const frag = document.createDocumentFragment();
      slice.forEach(r=>{
        const item = document.createElement('article');
        item.className = 'rev' + (r.lang==='ar' ? ' rtl' : '');
        item.innerHTML = `
          <header>
            <div style="display:flex;align-items:center;gap:8px;flex-wrap:wrap">
              <span class="name">${escapeHTML(r.name||'Anonymous')}</span>
              <span class="lang">${langLabel(r.lang)}</span>
              <span class="rating">${starsSmall(r.rating)}</span>
            </div>
            <span class="date">${fmtDate(r.date)}</span>
          </header>
          <div class="text">${escapeHTML(r.text||'')}</div>
        `;
        frag.appendChild(item);
      });
      listEl.appendChild(frag);
    }

    // pager
    pagerEl.innerHTML = '';
    if(lastPage>1){
      const mkBtn = (lab, toPage, active=false)=>{
        const b = document.createElement('button');
        b.className = 'pagebtn' + (active?' active':'');
        b.textContent = lab;
        b.addEventListener('click', ()=>{ page = toPage; render(); });
        return b;
      };
      pagerEl.appendChild(mkBtn('¬´', 1));
      pagerEl.appendChild(mkBtn('‚Äπ', Math.max(1, page-1)));
      const windowSize = 5;
      let from = Math.max(1, page - Math.floor(windowSize/2));
      let to = Math.min(lastPage, from + windowSize - 1);
      from = Math.max(1, to - windowSize + 1);
      for(let p=from; p<=to; p++){
        pagerEl.appendChild(mkBtn(String(p), p, p===page));
      }
      pagerEl.appendChild(mkBtn('‚Ä∫', Math.min(lastPage, page+1)));
      pagerEl.appendChild(mkBtn('¬ª', lastPage));
    }
  }

  function starsSmall(n){
    let out = '';
    for(let i=1;i<=5;i++){
      out += `<span class="rt ${i<=n?'on':''}"></span>`;
    }
    return out;
  }
  function langLabel(code){
    return { en:'EN', ar:'AR', hi:'HI', zh:'ZH', ja:'JA', es:'ES', ru:'RU' }[code] || code.toUpperCase();
  }
  function escapeHTML(s){ return (s||'').toString().replace(/[&<>"']/g, m=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[m])); }

  // ---------- Actions ----------
  document.getElementById('addBtn').addEventListener('click', ()=>{
    const name = document.getElementById('name').value.trim() || 'Anonymous';
    const lang = document.getElementById('lang').value;
    const text = document.getElementById('text').value.trim();
    if(!text){ alert('Please write your review (English only).'); return; }
    const one = {
      id: crypto.randomUUID(),
      lang, name, rating: currentRating, text, date: Date.now(),
      seed:false, manual:true
    };
    const data = read();
    data.unshift(one);
    write(data);
    document.getElementById('text').value='';
    render();

    // Auto-remove manual review after 60 seconds (silent)
    setTimeout(()=>{
      const cur = read().filter(r=>r.id!==one.id);
      write(cur);
      render();
    }, 60*1000);
  });

  // ---------- Boot ----------
  seedIfEmpty();
  write(purgePremiumAnalyzer(read())); // purge once if present
  render();

  // Daily auto-add engine (checks every 30s)
  ensureSchedule();
  runSchedulerTick();
  setInterval(runSchedulerTick, 30*1000);
})();
</script>

</body>
</html>
